(function framework7ComponentLoader(e,t){void 0===t&&(t=!0);var a=e.$,n=e.utils,l=(e.getDevice,e.getSupport,e.Class),r=(e.Modal,e.ConstructorMethods),o=(e.ModalMethods,n.extend),c=n.deleteProps;function i(e){this.wrapped=e}function s(e){var t,a;function n(t,a){try{var r=e[t](a),o=r.value,c=o instanceof i;Promise.resolve(c?o.wrapped:o).then((function(e){c?n("return"===t?"return":"next",e):l(r.done?"return":"normal",e)}),(function(e){n("throw",e)}))}catch(e){l("throw",e)}}function l(e,l){switch(e){case"return":t.resolve({value:l,done:!0});break;case"throw":t.reject(l);break;default:t.resolve({value:l,done:!1})}(t=t.next)?n(t.key,t.arg):a=null}this._invoke=function(e,l){return new Promise((function(r,o){var c={key:e,arg:l,resolve:r,reject:o,next:null};a?a=a.next=c:(t=a=c,n(e,l))}))},"function"!=typeof e.return&&(this.return=void 0)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"function"==typeof Symbol&&Symbol.asyncIterator&&(s.prototype[Symbol.asyncIterator]=function(){return this}),s.prototype.next=function(e){return this._invoke("next",e)},s.prototype.throw=function(e){return this._invoke("throw",e)},s.prototype.return=function(e){return this._invoke("return",e)};var h=function(e){var t,n;function l(t,n){var l;void 0===n&&(n={});var r=d(l=e.call(this,n,[t])||this),c={};r.useModulesParams(c),r.params=o(c,n);var i=a(r.params.el);if(0===i.length)return d(l);if(r.$el=i,r.el=i[0],r.$el[0].f7DataTable){var s=r.$el[0].f7DataTable;return r.destroy(),s||d(l)}function h(e){if(!e.detail||!e.detail.sentByF7DataTable){var t=a(this),n=t[0].checked,l=t.parents("td,th").index();if(t.parents("thead").length>0)0===l&&i.find("tbody tr")[n?"addClass":"removeClass"]("data-table-row-selected"),i.find("tbody tr td:nth-child("+(l+1)+") input").prop("checked",n).trigger("change",{sentByF7DataTable:!0}),t.prop("indeterminate",!1);else{0===l&&t.parents("tr")[n?"addClass":"removeClass"]("data-table-row-selected");var o=i.find("tbody .checkbox-cell:nth-child("+(l+1)+') input[type="checkbox"]:checked').length,c=i.find("tbody tr").length,s=i.find("thead .checkbox-cell:nth-child("+(l+1)+') input[type="checkbox"]');n?o===c&&s.prop("checked",!0).trigger("change",{sentByF7DataTable:!0}):s.prop("checked",!1),s.prop("indeterminate",o>0&&o<c)}r.checkSelectedHeader()}}function u(){var e,t=a(this),n=t.hasClass("sortable-cell-active"),l=t.hasClass("sortable-desc")?"desc":"asc";n?(e="desc"===l?"asc":"desc",t.removeClass("sortable-desc sortable-asc").addClass("sortable-"+e)):(i.find("thead .sortable-cell-active").removeClass("sortable-cell-active"),t.addClass("sortable-cell-active"),e=l),t.trigger("datatable:sort",e),r.emit("local::sort dataTableSort",r,e)}return r.$el[0].f7DataTable=r,o(r,{collapsible:i.hasClass("data-table-collapsible"),$headerEl:i.find(".data-table-header"),$headerSelectedEl:i.find(".data-table-header-selected")}),r.attachEvents=function(){r.$el.on("change",'.checkbox-cell input[type="checkbox"]',h),r.$el.find("thead .sortable-cell").on("click",u)},r.detachEvents=function(){r.$el.off("change",'.checkbox-cell input[type="checkbox"]',h),r.$el.find("thead .sortable-cell").off("click",u)},r.useModules(),r.init(),r||d(l)}n=e,(t=l).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=l.prototype;return r.setCollapsibleLabels=function(){var e=this;e.collapsible&&e.$el.find("tbody td:not(.checkbox-cell)").each((function(t){var n=a(t),l=n.index(),r=n.attr("data-collapsible-title");r||""===r||n.attr("data-collapsible-title",e.$el.find("thead th").eq(l).text())}))},r.checkSelectedHeader=function(){var e=this;if(e.$headerEl.length>0&&e.$headerSelectedEl.length>0){var t=e.$el.find("tbody .checkbox-cell input:checked").length;e.$el[t>0?"addClass":"removeClass"]("data-table-has-checked"),e.$headerSelectedEl.find(".data-table-selected-count").text(t)}},r.init=function(){var e=this;e.attachEvents(),e.setCollapsibleLabels(),e.checkSelectedHeader()},r.destroy=function(){var e=this;e.$el.trigger("datatable:beforedestroy"),e.emit("local::beforeDestroy dataTableBeforeDestroy",e),e.attachEvents(),e.$el[0]&&(e.$el[0].f7DataTable=null,delete e.$el[0].f7DataTable),c(e),e=null},l}(l),u={name:"dataTable",static:{DataTable:h},create:function(){this.dataTable=r({defaultSelector:".data-table",constructor:h,app:this,domProp:"f7DataTable"})},on:{tabBeforeRemove:function(e){var t=this;a(e).find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},tabMounted:function(e){var t=this;a(e).find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))},pageBeforeRemove:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.destroy(e)}))},pageInit:function(e){var t=this;e.$el.find(".data-table-init").each((function(e){t.dataTable.create({el:e})}))}},vnode:{"data-table-init":{insert:function(e){var t=e.elm;this.dataTable.create({el:t})},destroy:function(e){var t=e.elm;this.dataTable.destroy(t)}}}};if(t){if(e.prototype.modules&&e.prototype.modules[u.name])return;e.use(u),e.instance&&(e.instance.useModuleParams(u,e.instance.params),e.instance.useModule(u))}return u}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
