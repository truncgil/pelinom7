(function framework7ComponentLoader(e,t){void 0===t&&(t=!0);var n=e.$,i=e.utils,a=e.getDevice,r=e.getSupport,o=e.Class,s=(e.Modal,e.ConstructorMethods),l=(e.ModalMethods,i.requestAnimationFrame),c=i.getTranslate,u=i.extend,p=i.nextTick,d=i.deleteProps;function m(e){this.wrapped=e}function v(e){var t,n;function i(t,n){try{var r=e[t](n),o=r.value,s=o instanceof m;Promise.resolve(s?o.wrapped:o).then((function(e){s?i("return"===t?"return":"next",e):a(r.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(e){a("throw",e)}}function a(e,a){switch(e){case"return":t.resolve({value:a,done:!0});break;case"throw":t.reject(a);break;default:t.resolve({value:a,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,a){return new Promise((function(r,o){var s={key:e,arg:a,resolve:r,reject:o,next:null};n?n=n.next=s:(t=n=s,i(e,a))}))},"function"!=typeof e.return&&(this.return=void 0)}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}"function"==typeof Symbol&&Symbol.asyncIterator&&(v.prototype[Symbol.asyncIterator]=function(){return this}),v.prototype.next=function(e){return this._invoke("next",e)},v.prototype.throw=function(e){return this._invoke("throw",e)},v.prototype.return=function(e){return this._invoke("return",e)};function E(e,t){var i=this,a=i.app,o=n(e),s=o.index(),u=i.cols[s];if(!u.divider){var p,d,m,v,f;u.$el=o,u.el=o[0],u.$itemsEl=u.$el.find(".picker-items"),u.items=u.$itemsEl.find(".picker-item"),u.replaceValues=function(e,t){u.detachEvents(),u.values=e,u.displayValues=t,u.$itemsEl.html(i.renderColumn(u,!0)),u.items=u.$itemsEl.find(".picker-item"),u.calcSize(),u.setValue(u.values[0],0,!0),u.attachEvents()},u.calcSize=function(){i.params.rotateEffect&&(u.$el.removeClass("picker-column-absolute"),u.width||u.$el.css({width:""}));var e=0,t=u.$el[0].offsetHeight;p=u.items[0].offsetHeight,d=p*u.items.length,m=t/2-d+p/2,v=t/2-p/2,u.width&&(e=u.width,parseInt(e,10)===e&&(e+="px"),u.$el.css({width:e})),i.params.rotateEffect&&(u.width||(u.items.each((function(t){var i=n(t).children("span");e=Math.max(e,i[0].offsetWidth)})),u.$el.css({width:e+2+"px"})),u.$el.addClass("picker-column-absolute"))},u.setValue=function(e,t,n){void 0===t&&(t="");var a=u.$itemsEl.find('.picker-item[data-picker-value="'+e+'"]').index();if(void 0!==a&&-1!==a){var r=-a*p+v;u.$itemsEl.transition(t),u.$itemsEl.transform("translate3d(0,"+r+"px,0)"),i.params.updateValuesOnMomentum&&u.activeIndex&&u.activeIndex!==a&&(cancelAnimationFrame(f),u.$itemsEl.transitionEnd((function(){cancelAnimationFrame(f)})),O()),u.updateItems(a,r,t,n)}},u.updateItems=function(e,t,a,r){void 0===t&&(t=c(u.$itemsEl[0],"y")),void 0===e&&(e=-Math.round((t-v)/p)),e<0&&(e=0),e>=u.items.length&&(e=u.items.length-1);var o=u.activeIndex;u.activeIndex=e,u.$itemsEl.find(".picker-item-selected").removeClass("picker-item-selected"),u.items.transition(a);var s=u.items.eq(e).addClass("picker-item-selected").transform("");i.params.rotateEffect&&u.items.each((function(e){var a=n(e),r=(a.index()*p-(v-t))/p,o=Math.ceil(u.height/p/2)+1,s=-18*r;s>180&&(s=180),s<-180&&(s=-180),Math.abs(r)>o?a.addClass("picker-item-far"):a.removeClass("picker-item-far"),a.transform("translate3d(0, "+(-t+v)+"px, "+(i.needsOriginFix?-110:0)+"px) rotateX("+s+"deg)")})),(r||void 0===r)&&(u.value=s.attr("data-picker-value"),u.displayValue=u.displayValues?u.displayValues[e]:u.value,o!==e&&(u.onChange&&u.onChange(i,u.value,u.displayValue),i.updateValue()))};var h,E,$,g,k,y,x,w,b,C,V,M=!0,I=!!r().passiveListener&&{passive:!1,capture:!1};u.attachEvents=function(){u.$el.on(a.touchEvents.start,T,I),a.on("touchmove:active",j),a.on("touchend:passive",P),i.params.mousewheel&&u.$el.on("wheel",z),u.items.on("click",R)},u.detachEvents=function(){u.$el.off(a.touchEvents.start,T,I),a.off("touchmove:active",j),a.off("touchend:passive",P),i.params.mousewheel&&u.$el.off("wheel",z),u.items.off("click",R)},u.init=function(){u.calcSize(),u.$itemsEl.transform("translate3d(0,"+v+"px,0)").transition(0),0===s&&u.$el.addClass("picker-column-first"),s===i.cols.length-1&&u.$el.addClass("picker-column-last"),t&&u.updateItems(0,v,0),u.attachEvents()},u.destroy=function(){u.detachEvents()},u.init()}function O(){f=l((function(){u.updateItems(void 0,void 0,0),O()}))}function T(e){E||h||(e.preventDefault(),h=!0,$="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,g=$,k=(new Date).getTime(),M=!0,y=c(u.$itemsEl[0],"y"),w=y)}function j(e){h&&(e.preventDefault(),M=!1,g="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY,E||(cancelAnimationFrame(f),E=!0,y=c(u.$itemsEl[0],"y"),w=y,u.$itemsEl.transition(0)),x=void 0,(w=y+(g-$))<m&&(w=m-Math.pow(m-w,.8),x="min"),w>v&&(w=v+Math.pow(w-v,.8),x="max"),u.$itemsEl.transform("translate3d(0,"+w+"px,0)"),u.updateItems(void 0,w,0,i.params.updateValuesOnTouchmove),C=w-b||w,b=w)}function P(){if(!h||!E)return h=!1,void(E=!1);var e;h=!1,E=!1,u.$itemsEl.transition(""),x&&("min"===x?u.$itemsEl.transform("translate3d(0,"+m+"px,0)"):u.$itemsEl.transform("translate3d(0,"+v+"px,0)")),e=(new Date).getTime()-k>300?w:w+C*i.params.momentumRatio,e=Math.max(Math.min(e,v),m);var t=Math.round(Math.abs((e-v)/p));i.params.freeMode||(e=-t*p+v),u.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),u.updateItems(t,e,"",!0),i.params.updateValuesOnMomentum&&(O(),u.$itemsEl.transitionEnd((function(){cancelAnimationFrame(f)}))),setTimeout((function(){M=!0}),100)}function z(e){var t=e.deltaX,n=e.deltaY;Math.abs(t)>Math.abs(n)||(clearTimeout(V),e.preventDefault(),cancelAnimationFrame(f),y=c(u.$itemsEl[0],"y"),u.$itemsEl.transition(0),x=void 0,(w=y-n)<m&&(w=m,x="min"),w>v&&(w=v,x="max"),u.$itemsEl.transform("translate3d(0,"+w+"px,0)"),u.updateItems(void 0,w,0,i.params.updateValuesOnMousewheel),V=setTimeout((function(){u.$itemsEl.transition(""),x&&("min"===x?u.$itemsEl.transform("translate3d(0,"+m+"px,0)"):u.$itemsEl.transform("translate3d(0,"+v+"px,0)")),(new Date).getTime();var e=w;e=Math.max(Math.min(e,v),m);var t=Math.round(Math.abs((e-v)/p));i.params.freeMode||(e=-t*p+v),u.$itemsEl.transform("translate3d(0,"+parseInt(e,10)+"px,0)"),u.updateItems(t,e,"",!0)}),200))}function R(){if(M){cancelAnimationFrame(f);var e=n(this).attr("data-picker-value");u.setValue(e)}}}var $=function(e){var t,i;function r(t,i){var r;void 0===i&&(i={});var o,s,l=h(r=e.call(this,i,[t])||this),c=a();if(l.params=u({},t.params.picker,i),l.params.containerEl&&0===(o=n(l.params.containerEl)).length)return l||h(r);l.params.inputEl&&(s=n(l.params.inputEl));var p=l.params.scrollToInput?s:void 0;if(l.params.scrollToEl){var d=n(l.params.scrollToEl);d.length>0&&(p=d)}function m(){l.resizeCols()}function v(){l.open()}function f(e){e.preventDefault()}function E(e){if(!l.destroyed&&l.params){var t=n(e.target);l.isPopover()||l.opened&&!l.closing&&(t.closest('[class*="backdrop"]').length||(s&&s.length>0?t[0]!==s[0]&&0===t.closest(".sheet-modal").length&&l.close():0===n(e.target).closest(".sheet-modal").length&&l.close()))}}return u(l,{app:t,$containerEl:o,containerEl:o&&o[0],inline:o&&o.length>0,needsOriginFix:c.ios||window.navigator.userAgent.toLowerCase().indexOf("safari")>=0&&window.navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!c.android,cols:[],$inputEl:s,inputEl:s&&s[0],$scrollToEl:p,initialized:!1,opened:!1,url:l.params.url}),u(l,{attachResizeEvent:function(){t.on("resize",m)},detachResizeEvent:function(){t.off("resize",m)},attachInputEvents:function(){l.$inputEl.on("click",v),l.params.inputReadOnly&&(l.$inputEl.on("focus mousedown",f),l.$inputEl[0]&&(l.$inputEl[0].f7ValidateReadonly=!0))},detachInputEvents:function(){l.$inputEl.off("click",v),l.params.inputReadOnly&&(l.$inputEl.off("focus mousedown",f),l.$inputEl[0]&&delete l.$inputEl[0].f7ValidateReadonly)},attachHtmlEvents:function(){t.on("click",E)},detachHtmlEvents:function(){t.off("click",E)}}),l.init(),l||h(r)}i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i;var o,s,l,c=r.prototype;return c.initInput=function(){var e=this;e.$inputEl&&e.params.inputReadOnly&&e.$inputEl.prop("readOnly",!0)},c.resizeCols=function(){var e=this;if(e.opened)for(var t=0;t<e.cols.length;t+=1)e.cols[t].divider||(e.cols[t].calcSize(),e.cols[t].setValue(e.cols[t].value,0,!1))},c.isPopover=function(){var e=this,t=e.app,n=e.modal,i=e.params,r=a();if("sheet"===i.openIn)return!1;if(n&&"popover"!==n.type)return!1;if(!e.inline&&e.inputEl){if("popover"===i.openIn)return!0;if(r.ios)return!!r.ipad;if(t.width>=768)return!0;if(r.desktop&&"aurora"===t.theme)return!0}return!1},c.formatValue=function(){var e=this,t=e.value,n=e.displayValue;return e.params.formatValue?e.params.formatValue.call(e,t,n):t.join(" ")},c.setValue=function(e,t){var n=this,i=0;if(0===n.cols.length)return n.value=e,void n.updateValue(e);for(var a=0;a<n.cols.length;a+=1)n.cols[a]&&!n.cols[a].divider&&(n.cols[a].setValue(e[i],t),i+=1)},c.getValue=function(){return this.value},c.updateValue=function(e){var t,n=this,i=e||[],a=[];if(0===n.cols.length)for(var r=n.params.cols.filter((function(e){return!e.divider})),o=0;o<r.length;o+=1)void 0!==(t=r[o]).displayValues&&void 0!==t.values&&-1!==t.values.indexOf(i[o])?a.push(t.displayValues[t.values.indexOf(i[o])]):a.push(i[o]);else for(var s=0;s<n.cols.length;s+=1)n.cols[s].divider||(i.push(n.cols[s].value),a.push(n.cols[s].displayValue));i.indexOf(void 0)>=0||(n.value=i,n.displayValue=a,n.emit("local::change pickerChange",n,n.value,n.displayValue),n.inputEl&&(n.$inputEl.val(n.formatValue()),n.$inputEl.trigger("change")))},c.initColumn=function(e,t){E.call(this,e,t)},c.destroyColumn=function(e){var t=this,i=n(e).index();t.cols[i]&&t.cols[i].destroy&&t.cols[i].destroy()},c.renderToolbar=function(){var e=this;return e.params.renderToolbar?e.params.renderToolbar.call(e,e):$jsx("div",{class:"toolbar toolbar-top no-shadow"},$jsx("div",{class:"toolbar-inner"},$jsx("div",{class:"left"}),$jsx("div",{class:"right"},$jsx("a",{class:"link sheet-close popover-close"},e.params.toolbarCloseText))))},c.renderColumn=function(e,t){var n,i,a="picker-column "+(e.textAlign?"picker-column-"+e.textAlign:"")+" "+(e.cssClass||"");return n=e.divider?'\n        <div class="'+a+' picker-column-divider">'+e.content+"</div>\n      ":'\n        <div class="'+a+'">\n          <div class="picker-items">'+(i=e.values.map((function(t,n){return'\n        <div class="picker-item" data-picker-value="'+t+'">\n          <span>'+(e.displayValues?e.displayValues[n]:t)+"</span>\n        </div>\n      "})).join(""))+"</div>\n        </div>\n      ",t?i.trim():n.trim()},c.renderInline=function(){var e=this,t=e.params,n=t.rotateEffect,i=t.cssClass,a=t.toolbar;return $jsx("div",{class:"picker picker-inline "+(n?"picker-3d":"")+" "+(i||"")},a&&e.renderToolbar(),$jsx("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),$jsx("div",{class:"picker-center-highlight"})))},c.renderSheet=function(){var e=this,t=e.params,n=t.rotateEffect,i=t.cssClass,a=t.toolbar;return $jsx("div",{class:"sheet-modal picker picker-sheet "+(n?"picker-3d":"")+" "+(i||"")},a&&e.renderToolbar(),$jsx("div",{class:"sheet-modal-inner picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),$jsx("div",{class:"picker-center-highlight"})))},c.renderPopover=function(){var e=this,t=e.params,n=t.rotateEffect,i=t.cssClass,a=t.toolbar;return $jsx("div",{class:"popover picker-popover"},$jsx("div",{class:"popover-inner"},$jsx("div",{class:"picker "+(n?"picker-3d":"")+" "+(i||"")},a&&e.renderToolbar(),$jsx("div",{class:"picker-columns"},e.cols.map((function(t){return e.renderColumn(t)})),$jsx("div",{class:"picker-center-highlight"})))))},c.render=function(){var e=this;return e.params.render?e.params.render.call(e):e.inline?e.renderInline():e.isPopover()?e.renderPopover():e.renderSheet()},c.onOpen=function(){var e=this,t=e.initialized,n=e.$el,i=e.app,a=e.$inputEl,r=e.inline,o=e.value,s=e.params;e.opened=!0,e.closing=!1,e.opening=!0,e.attachResizeEvent(),n.find(".picker-column").each((function(n){var i=!0;(!t&&s.value||t&&o)&&(i=!1),e.initColumn(n,i)})),t?o&&e.setValue(o,0):o?e.setValue(o,0):s.value&&e.setValue(s.value,0),!r&&a&&a.length&&"md"===i.theme&&a.trigger("focus"),e.initialized=!0,n&&n.trigger("picker:open"),a&&a.trigger("picker:open"),e.emit("local::open pickerOpen",e)},c.onOpened=function(){var e=this;e.opening=!1,e.$el&&e.$el.trigger("picker:opened"),e.$inputEl&&e.$inputEl.trigger("picker:opened"),e.emit("local::opened pickerOpened",e)},c.onClose=function(){var e=this,t=e.app;if(e.opening=!1,e.closing=!0,e.detachResizeEvent(),e.cols.forEach((function(e){e.destroy&&e.destroy()})),e.$inputEl)if("md"===t.theme)e.$inputEl.trigger("blur");else{var n=e.$inputEl.attr("validate"),i=e.$inputEl.attr("required");n&&i&&t.input.validate(e.$inputEl)}e.$el&&e.$el.trigger("picker:close"),e.$inputEl&&e.$inputEl.trigger("picker:close"),e.emit("local::close pickerClose",e)},c.onClosed=function(){var e=this;e.opened=!1,e.closing=!1,e.inline||p((function(){e.modal&&e.modal.el&&e.modal.destroy&&(e.params.routableModals||e.modal.destroy()),delete e.modal})),e.$el&&e.$el.trigger("picker:closed"),e.$inputEl&&e.$inputEl.trigger("picker:closed"),e.emit("local::closed pickerClosed",e)},c.open=function(){var e=this,t=e.app,i=e.opened,a=e.inline,r=e.$inputEl,o=e.$scrollToEl,s=e.params;if(!i){if(0===e.cols.length&&s.cols.length&&s.cols.forEach((function(t){e.cols.push(t)})),a)return e.$el=n(e.render()),e.$el[0].f7Picker=e,e.$containerEl.append(e.$el),e.onOpen(),void e.onOpened();var l,c=e.isPopover(),u=c?"popover":"sheet",p={targetEl:r,scrollToEl:o,content:e.render(),backdrop:void 0!==s.backdrop?s.backdrop:c,on:{open:function(){var t=this;e.modal=t,e.$el=c?t.$el.find(".picker"):t.$el,e.$el[0].f7Picker=e,e.onOpen()},opened:function(){e.onOpened()},close:function(){e.onClose()},closed:function(){e.onClosed()}}};if("sheet"===u&&(p.push=s.sheetPush,p.swipeToClose=s.sheetSwipeToClose),s.routableModals&&e.view)e.view.router.navigate({url:e.url,route:(l={path:e.url},l[u]=p,l)});else e.modal=t[u].create(p),e.modal.open()}},c.close=function(){var e=this,t=e.opened,n=e.inline;if(t)return n?(e.onClose(),void e.onClosed()):void(e.params.routableModals&&e.view?e.view.router.back():e.modal.close())},c.init=function(){var e=this;if(e.initInput(),e.inline)return e.open(),void e.emit("local::init pickerInit",e);!e.initialized&&e.params.value&&e.setValue(e.params.value),e.$inputEl&&e.attachInputEvents(),e.params.closeByOutsideClick&&e.attachHtmlEvents(),e.emit("local::init pickerInit",e)},c.destroy=function(){var e=this;if(!e.destroyed){var t=e.$el;e.emit("local::beforeDestroy pickerBeforeDestroy",e),t&&t.trigger("picker:beforedestroy"),e.close(),e.$inputEl&&e.detachInputEvents(),e.params.closeByOutsideClick&&e.detachHtmlEvents(),t&&t.length&&delete e.$el[0].f7Picker,d(e),e.destroyed=!0}},o=r,(s=[{key:"view",get:function(){var e,t=this.app,n=this.params,i=this.$inputEl;return n.view?e=n.view:i&&(e=i.parents(".view").length&&i.parents(".view")[0].f7View),e||(e=t.views.main),e}}])&&f(o.prototype,s),l&&f(o,l),r}(o),g={name:"picker",static:{Picker:$},create:function(){var e=this;e.picker=s({defaultSelector:".picker",constructor:$,app:e,domProp:"f7Picker"}),e.picker.close=function(e){void 0===e&&(e=".picker");var t=n(e);if(0!==t.length){var i=t[0].f7Picker;!i||i&&!i.opened||i.close()}}},params:{picker:{updateValuesOnMomentum:!1,updateValuesOnTouchmove:!0,updateValuesOnMousewheel:!0,mousewheel:!0,rotateEffect:!1,momentumRatio:7,freeMode:!1,cols:[],containerEl:null,openIn:"auto",sheetPush:!1,sheetSwipeToClose:void 0,backdrop:void 0,formatValue:null,inputEl:null,inputReadOnly:!0,closeByOutsideClick:!0,scrollToInput:!0,scrollToEl:void 0,toolbar:!0,toolbarCloseText:"Done",cssClass:null,routableModals:!1,view:null,url:"select/",renderToolbar:null,render:null}}};if(t){if(e.prototype.modules&&e.prototype.modules[g.name])return;e.use(g),e.instance&&(e.instance.useModuleParams(g,e.instance.params),e.instance.useModule(g))}return g}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
