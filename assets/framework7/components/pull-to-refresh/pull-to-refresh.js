(function framework7ComponentLoader(t,e){void 0===e&&(e=!0);var r=t.$,o=t.utils,a=t.getDevice,n=t.getSupport,s=t.Class,l=(t.Modal,t.ConstructorMethods),i=(t.ModalMethods,o.deleteProps),p=o.extend;function u(t){this.wrapped=t}function c(t){var e,r;function o(e,r){try{var n=t[e](r),s=n.value,l=s instanceof u;Promise.resolve(l?s.wrapped:s).then((function(t){l?o("return"===e?"return":"next",t):a(n.done?"return":"normal",t)}),(function(t){o("throw",t)}))}catch(t){a("throw",t)}}function a(t,a){switch(t){case"return":e.resolve({value:a,done:!0});break;case"throw":e.reject(a);break;default:e.resolve({value:a,done:!1})}(e=e.next)?o(e.key,e.arg):r=null}this._invoke=function(t,a){return new Promise((function(n,s){var l={key:t,arg:a,resolve:n,reject:s,next:null};r?r=r.next=l:(e=r=l,o(t,a))}))},"function"!=typeof t.return&&(this.return=void 0)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}"function"==typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(t){return this._invoke("next",t)},c.prototype.throw=function(t){return this._invoke("throw",t)},c.prototype.return=function(t){return this._invoke("return",t)};var h=function(t){var e,o;function s(e,o){var s,l=f(s=t.call(this,{},[e])||this),i=a(),p=n(),u=r(o),c=u.find(".ptr-preloader");l.$el=u,l.el=u[0],l.app=e,l.bottom=l.$el.hasClass("ptr-bottom"),l.useModulesParams({});var h,d,v,g="md"===e.theme,m="ios"===e.theme,b="aurora"===e.theme;l.done=function(){return(g?c:u).transitionEnd((function(){u.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down ptr-closing"),u.trigger("ptr:done"),l.emit("local::done ptrDone",u[0])})),u.removeClass("ptr-refreshing").addClass("ptr-transitioning ptr-closing"),l},l.refresh=function(){return u.hasClass("ptr-refreshing")||(u.addClass("ptr-transitioning ptr-refreshing"),u.trigger("ptr:refresh",l.done),l.emit("local::refresh ptrRefresh",u[0],l.done)),l},l.mousewheel="true"===u.attr("data-ptr-mousewheel");var w,C,y,M,T,x,P,E,H,k,R,D,S,_={},I=!1,$=!1,X=!1,Y=0,B=!1,j=u.parents(".page");if((j.find(".navbar").length>0||j.parents(".view").children(".navbars").length>0)&&(B=!0),j.hasClass("no-navbar")&&(B=!1),!l.bottom){var L=e.navbar.getElByPage(j[0]);if(L){var O=r(L),V=O.hasClass("navbar-large-transparent")||O.hasClass("navbar-large")&&O.hasClass("navbar-transparent"),q=O.hasClass("navbar-transparent")&&!O.hasClass("navbar-large");V?u.addClass("ptr-with-navbar-large-transparent"):q&&u.addClass("ptr-with-navbar-transparent")}}function z(t){if(d){if("android"!==i.os)return;if("targetTouches"in t&&t.targetTouches.length>1)return}u.hasClass("ptr-refreshing")||r(t.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length||(v=!1,E=!1,d=!0,w=void 0,T=void 0,"touchstart"===t.type&&(h=t.targetTouches[0].identifier),_.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,_.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY)}function A(t){if(d){var e,a,n;if("touchmove"===t.type){if(h&&t.touches)for(var s=0;s<t.touches.length;s+=1)t.touches[s].identifier===h&&(n=t.touches[s]);n||(n=t.targetTouches[0]),e=n.pageX,a=n.pageY}else e=t.pageX,a=t.pageY;if(e&&a)if(void 0===w&&(w=!!(w||Math.abs(a-_.y)>Math.abs(e-_.x))),w){if(M=u[0].scrollTop,!v){var p;if(u.removeClass("ptr-transitioning"),H=u[0].scrollHeight,k=u[0].offsetHeight,l.bottom&&(R=H-k),M>H)return void(d=!1);var f=r(t.target).closest(".ptr-watch-scroll");if(f.length&&f.each((function(t){t!==o&&t.scrollHeight>t.offsetHeight&&"auto"===r(t).css("overflow")&&(!l.bottom&&t.scrollTop>0||l.bottom&&t.scrollTop<t.scrollHeight-t.offsetHeight)&&(p=!0)})),p)return void(d=!1);P&&(x=u.attr("data-ptr-distance")).indexOf("%")>=0&&(x=H*parseInt(x,10)/100),Y=u.hasClass("ptr-refreshing")?x:0,$=!(H!==k&&"ios"===i.os&&!g),X=!1}v=!0,C=a-_.y,void 0===T&&(l.bottom?M!==R:0!==M)&&(T=!0),(l.bottom?C<0&&M>=R||M>R:C>0&&M<=0||M<0)?("ios"===i.os&&parseInt(i.osVersion.split(".")[0],10)>7&&(l.bottom||0!==M||T||($=!0),l.bottom&&M===R&&!T&&($=!0)),$||!l.bottom||g||(u.css("-webkit-overflow-scrolling","auto"),u.scrollTop(R),X=!0),($||X)&&(t.cancelable&&t.preventDefault(),y=(l.bottom?-1*Math.pow(Math.abs(C),.85):Math.pow(C,.85))+Y,g?c.transform("translate3d(0,"+y+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(C)/66*180+100)+"deg)"):l.bottom?u.children().transform("translate3d(0,"+y+"px,0)"):u.transform("translate3d(0,"+y+"px,0)")),($||X)&&Math.pow(Math.abs(C),.85)>x||!$&&Math.abs(C)>=2*x?(I=!0,u.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(I=!1,u.removeClass("ptr-pull-up").addClass("ptr-pull-down")),E||(u.trigger("ptr:pullstart"),l.emit("local::pullStart ptrPullStart",u[0]),E=!0),u.trigger("ptr:pullmove",{event:t,scrollTop:M,translate:y,touchesDiff:C}),l.emit("local::pullMove ptrPullMove",u[0],{event:t,scrollTop:M,translate:y,touchesDiff:C})):(E=!1,u.removeClass("ptr-pull-up ptr-pull-down"),I=!1)}else d=!1}}function F(t){return"touchend"===t.type&&t.changedTouches&&t.changedTouches.length>0&&h&&t.changedTouches[0].identifier!==h?(d=!1,w=!1,v=!1,void(h=null)):d&&v?(y&&(u.addClass("ptr-transitioning"),y=0),g?c.transform("").find(".ptr-arrow").transform(""):l.bottom?u.children().transform(""):u.transform(""),$||!l.bottom||g||u.css("-webkit-overflow-scrolling",""),I?(u.addClass("ptr-refreshing"),u.trigger("ptr:refresh",l.done),l.emit("local::refresh ptrRefresh",u[0],l.done)):u.removeClass("ptr-pull-down"),d=!1,v=!1,void(E&&(u.trigger("ptr:pullend"),l.emit("local::pullEnd ptrPullEnd",u[0])))):(d=!1,void(v=!1))}B||l.bottom||u.addClass("ptr-no-navbar"),u.attr("data-ptr-distance")?P=!0:g?x=66:m?x=44:b&&(x=38);var G=!0,J=0;function K(){G=!0,S=!1,J=0,y&&(u.addClass("ptr-transitioning"),y=0),g?c.transform("").find(".ptr-arrow").transform(""):l.bottom?u.children().transform(""):u.transform(""),I?(u.addClass("ptr-refreshing"),u.trigger("ptr:refresh",l.done),l.emit("local::refresh ptrRefresh",u[0],l.done)):u.removeClass("ptr-pull-down"),E&&(u.trigger("ptr:pullend"),l.emit("local::pullEnd ptrPullEnd",u[0]))}function N(t){if(G){var e=t.deltaX,a=t.deltaY;if(!(Math.abs(e)>Math.abs(a)||u.hasClass("ptr-refreshing")||r(t.target).closest(".sortable-handler, .ptr-ignore, .card-expandable.card-opened").length)){if(clearTimeout(D),M=u[0].scrollTop,!S){var n;if(u.removeClass("ptr-transitioning"),H=u[0].scrollHeight,k=u[0].offsetHeight,l.bottom&&(R=H-k),M>H)return void(G=!1);var s=r(t.target).closest(".ptr-watch-scroll");if(s.length&&s.each((function(t){t!==o&&t.scrollHeight>t.offsetHeight&&"auto"===r(t).css("overflow")&&(!l.bottom&&t.scrollTop>0||l.bottom&&t.scrollTop<t.scrollHeight-t.offsetHeight)&&(n=!0)})),n)return void(G=!1);P&&(x=u.attr("data-ptr-distance")).indexOf("%")>=0&&(x=H*parseInt(x,10)/100)}v=!0,C=J-=a,void 0===T&&(l.bottom?M!==R:0!==M)&&(T=!0),(l.bottom?C<0&&M>=R||M>R:C>0&&M<=0||M<0)?(t.cancelable&&t.preventDefault(),y=C,Math.abs(y)>x&&(y=x+Math.pow(Math.abs(y)-x,.7),l.bottom&&(y=-y)),g?c.transform("translate3d(0,"+y+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(C)/66*180+100)+"deg)"):l.bottom?u.children().transform("translate3d(0,"+y+"px,0)"):u.transform("translate3d(0,"+y+"px,0)"),Math.abs(y)>x?(I=!0,u.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(I=!1,u.removeClass("ptr-pull-up").addClass("ptr-pull-down")),E||(u.trigger("ptr:pullstart"),l.emit("local::pullStart ptrPullStart",u[0]),E=!0),u.trigger("ptr:pullmove",{event:t,scrollTop:M,translate:y,touchesDiff:C}),l.emit("local::pullMove ptrPullMove",u[0],{event:t,scrollTop:M,translate:y,touchesDiff:C})):(E=!1,u.removeClass("ptr-pull-up ptr-pull-down"),I=!1),D=setTimeout(K,300)}}}return j.length&&u.length?(u[0].f7PullToRefresh=l,l.attachEvents=function(){var t=!!p.passiveListener&&{passive:!0};u.on(e.touchEvents.start,z,t),e.on("touchmove:active",A),e.on("touchend:passive",F),l.mousewheel&&!l.bottom&&u.on("wheel",N)},l.detachEvents=function(){var t=!!p.passiveListener&&{passive:!0};u.off(e.touchEvents.start,z,t),e.off("touchmove:active",A),e.off("touchend:passive",F),l.mousewheel&&!l.bottom&&u.off("wheel",N)},l.useModules(),l.init(),l||f(s)):l||f(s)}o=t,(e=s).prototype=Object.create(o.prototype),e.prototype.constructor=e,e.__proto__=o;var l=s.prototype;return l.init=function(){this.attachEvents()},l.destroy=function(){var t=this;t.emit("local::beforeDestroy ptrBeforeDestroy",t),t.$el.trigger("ptr:beforedestroy"),delete t.el.f7PullToRefresh,t.detachEvents(),i(t),t=null},s}(s),d={name:"pullToRefresh",create:function(){var t=this;t.ptr=p(l({defaultSelector:".ptr-content",constructor:h,app:t,domProp:"f7PullToRefresh"}),{done:function(e){var r=t.ptr.get(e);if(r)return r.done()},refresh:function(e){var r=t.ptr.get(e);if(r)return r.refresh()}})},static:{PullToRefresh:h},on:{tabMounted:function(t){var e=this,o=r(t),a=o.find(".ptr-content");o.is(".ptr-content")&&a.add(o),a.each((function(t){e.ptr.create(t)}))},tabBeforeRemove:function(t){var e=r(t),o=this,a=e.find(".ptr-content");e.is(".ptr-content")&&a.add(e),a.each((function(t){o.ptr.destroy(t)}))},pageInit:function(t){var e=this;t.$el.find(".ptr-content").each((function(t){e.ptr.create(t)}))},pageBeforeRemove:function(t){var e=this;t.$el.find(".ptr-content").each((function(t){e.ptr.destroy(t)}))}}};if(e){if(t.prototype.modules&&t.prototype.modules[d.name])return;t.use(d),t.instance&&(t.instance.useModuleParams(d,t.instance.params),t.instance.useModule(d))}return d}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
